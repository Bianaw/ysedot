<!DOCTYPE html>
<html lang="en">
<head>
  
  <link rel="stylesheet" href="../add_favorite/style.css">
  <link rel="stylesheet" href="../rentseldele/style.css">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Homepage</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
  <script src="../add_favorite/script.js" defer></script>
<script src="../js/script.js" defer></script>
<script src="../rentseldele/script.js" defer></script>
</body>
</html>

  <!-- ×›×•×ª×¨×ª ×¨××©×™×ª -->
  <div id="user-actions"></div>
  <header class="page-header">
    <h1>SCM</h1>
    <p class="subtitle">
      Smart <span class="highlight">Community</span> Maps
    </p>
  </header>

  <!-- ×§×• ×©×—×•×¨ -->
  <hr class="line">

  <!-- ×›×¤×ª×•×¨×™× ××¨×›×–×™×™× -->
  <section class="buttons-container">
    <div class="dropdown-container">
      <button class="settings-button"><i class="fa-solid fa-cog"></i></button>
      <div class="dropdown-content">
        <a href="./closure_acc/index.html">Closure Account</a>
        <a href="./requestworker/index.html">Request Worker</a>

      </div>
    </div>
  </div>
    
    <button class="contact-button"><i class="fa-solid fa-phone"></i></button>
    <button class="search-button"><i class="fa-solid fa-magnifying-glass"></i></button> 
<button class="favorites-button" id="favorites-icon">
  <i class="fa-solid fa-heart"></i>
  <span id="favorites-count" class="favorites-count"></span>
</button>
<div id="favorites-dropdown" class="favorites-dropdown"></div>

    <!-- ×›×¤×ª×•×¨ ×¤×¢××•×Ÿ -->
    <div class="notification-button">
      <button id="notification-icon">
        <i class="fa-solid fa-bell"></i>
        <span id="notification-count" class="notification-count"></span>
      </button>
      <div id="notification-dropdown" class="notification-dropdown"></div>
    </div>
  </section>

  <!-- ××–×•×¨ ×”×¡×™× ×•×Ÿ -->
<section class="filter-bar">
  <div class="filter">
    <select id="filter-transaction">
      <option value="all">×”×›×œ</option>
      <option value="××›×™×¨×”">××›×™×¨×”</option>
      <option value="×”×©×›×¨×”">×”×©×›×¨×”</option>
    </select>
  </div>

  <div class="dropdown-container">
    <div class="dropdown-button">×¡×•×’ ×”× ×›×¡</div>
    <div class="dropdown-content">
      <label><input type="checkbox" class="filter-type" value="×”×›×œ" checked> ×”×›×œ</label>
      <label><input type="checkbox" class="filter-type" value="×“×™×¨×”"> ×“×™×¨×”</label>
      <label><input type="checkbox" class="filter-type" value="×“×™×¨×ª ×’×Ÿ"> ×“×™×¨×ª ×’×Ÿ</label>
      <label><input type="checkbox" class="filter-type" value="×™×—×™×“×ª ×“×™×•×¨"> ×™×—×™×“×ª ×“×™×•×¨</label>
      <label><input type="checkbox" class="filter-type" value="×¡×˜×•×“×™×•"> ×¡×˜×•×“×™×•</label>
    </div>
  </div>

  <div class="dropdown-container">
    <div class="dropdown-button">×¡×™× ×•× ×™× × ×•×¡×¤×™×</div>
    <div class="dropdown-content">
      <label><input type="checkbox" id="filter-parking" value="×—× ×™×”"> ×—× ×™×”</label>
      <label><input type="checkbox" id="filter-elevator" value="××¢×œ×™×ª"> ××¢×œ×™×ª</label>
      <label><input type="checkbox" id="filter-balcony" value="××¨×¤×¡×ª"> ××¨×¤×¡×ª</label>
      <label><input type="checkbox" id="filter-storage" value="××—×¡×Ÿ"> ××—×¡×Ÿ</label>
      <label><input type="checkbox" id="filter-mamad" value="×“'××"> ××"×“</label>
      <label><input type="checkbox" id="filter-furnished" value="×¨×™×”×•×˜"> ×¨×™×”×•×˜</label>
    </div>
  </div>

  <div class="dropdown-container">
    <div class="dropdown-button">×—×“×¨×™×</div>
    <div class="dropdown-content room-buttons">
      <label><input type="radio" name="rooms" value="0" id="rooms-all" checked> ×›×œ ×”×—×“×¨×™×</label>
      <label><input type="radio" name="rooms" value="1"> 1</label>
      <label><input type="radio" name="rooms" value="1.5"> 1.5</label>
      <label><input type="radio" name="rooms" value="2"> 2</label>
      <label><input type="radio" name="rooms" value="2.5"> 2.5</label>
      <label><input type="radio" name="rooms" value="3"> 3</label>
      <label><input type="radio" name="rooms" value="3.5"> 3.5</label>
      <label><input type="radio" name="rooms" value="4"> 4</label>
      <label><input type="radio" name="rooms" value="5"> 5</label>
      <label><input type="radio" name="rooms" value="6+"> 6+</label>
    </div>
  </div>

  <div class="dropdown-container">
    <div class="dropdown-button">××—×™×¨</div>
    <div class="dropdown-content">
      <div class="custom-price">
        <label for="custom-price-input">××—×™×¨ ××§×¡×™××œ×™:</label>
        <input type="number" id="filter-price" placeholder="×”×›× ×¡ ××—×™×¨ ××§×¡×™××œ×™" min="0">
      </div>
    </div>
  </div>

  <div class="search-button">
    <button id="search-button">×—×™×¤×•×©</button>
  </div>
</section>
</footer>
<div class="dropdown-container">
  <div class="dropdown-content">
    <a href="./closure_acc/index.html">Closure Account</a>
    <a href="./requestworker/index.html">Request Worker</a>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const userActions = document.getElementById("user-actions");
    const username = localStorage.getItem("username");
    const firstName = localStorage.getItem("firstname");
    const lastName = localStorage.getItem("lastname");

   // console.log(username)


    if (username) {
      // ×× ×”××©×ª××© ××—×•×‘×¨
      userActions.innerHTML = `
        <span>×©×œ×•×, ${firstName} ${lastName}</span>
        <button id="logout-button">Log Out</button>
      `;

      // ×˜×™×¤×•×œ ×‘×›×¤×ª×•×¨ "Log Out"
      document.getElementById("logout-button").addEventListener("click", () => {
        localStorage.removeItem("username"); // ××—×™×§×ª ×©× ×”××©×ª××© ××”-localStorage
        location.reload(); // ×¨×¢× ×•×Ÿ ×”×“×£
      });
    } else {
      // ×× ×”××©×ª××© ×œ× ××—×•×‘×¨
      userActions.innerHTML = `
        <a href="../LOGIN/login.html" class="login-button">×”×ª×—×‘×¨×•×ª</a>
      `;
    }
  });
</script>

 <!-- ××–×•×¨ ×”×“×™×¨×•×ª -->
<section class="layout-container">
  <div class="properties-container">
  </div>
</section>

<script type="module">
  import posts from './posts.js';

  const propertiesContainer = document.querySelector('.properties-container');

  function renderPosts(posts) {
  const propertiesContainer = document.querySelector('.properties-container');
  propertiesContainer.innerHTML = ''; // ×× ×§×” ×ª×¦×•×’×” ×§×™×™××ª
  if (posts.length === 0) {
    propertiesContainer.innerHTML = '<p>×œ× × ××¦××• ×ª×•×¦××•×ª</p>';
    return;
  }

  posts.forEach((post) => {
  const postHTML = `
    <div class="property-card-horizontal" id="apartment-${post.id}">
      <img class="property-image" src="${post.image}" alt="${post.title}">
      <div class="property-details">
        <h3>${post.title}</h3>
        <p><strong>â‚ª${post.price}</strong></p>
        <p>${post.type} - ×“×™×¨×” ${post.rooms} ×—×“×¨×™× (${post.size} ×"×¨)</p>
        <p>×§×•××” ${post.floor}</p>
        <a href="../detailss/details.html?id=${post.id}" class="details-button">×¤×¨×˜×™× × ×•×¡×¤×™×</a>
         <button class="favorite-button">Add to Favorites</button>
</div>
      </div>
    </div>
    <!-- Trash Options -->
    <div class="trash-container">
      <button class="trash-btn" onclick="toggleTrashOptions('${post.id}')">ğŸ—‘ï¸</button>
      <div class="trash-options" id="trash-options-${post.id}">
        <button onclick="markAsSold('${post.id}')">Mark as Sold</button>
        <button onclick="markAsRented('${post.id}')">Mark as Rented</button>
        <button onclick="deletePost('${post.id}')">Delete Post</button>
      </div>
    </div>
  </div>
</div>

        </div>
        </div>
      </div>`;
    propertiesContainer.innerHTML += postHTML;
  });
}

  // ×¤×•× ×§×¦×™×” ×œ×—×™×¤×•×©
function searchPosts() {
    const type = document.getElementById('filter-transaction').value;
    const maxPrice = parseFloat(document.getElementById('filter-price').value) || Infinity;
    const rooms = document.querySelector('input[name="rooms"]:checked').value;

    // ×¡×™× ×•×Ÿ ×”×“×™×¨×•×ª
    const filteredPosts = posts.filter((post) => {
        const matchesType = type === 'all' || post.type === type;
        const matchesPrice = post.price <= maxPrice;
        const matchesRooms = rooms === '0' || post.rooms.toString() === rooms;

        return matchesType && matchesPrice && matchesRooms;
    });

    // ×©××™×¨×ª ×”×ª×•×¦××•×ª ×‘-localStorage
    localStorage.setItem('searchResults', JSON.stringify(filteredPosts));

    // ××¢×‘×¨ ×œ×“×£ ×”×ª×•×¦××•×ª
    window.location.href = '../search/search.html';
}

// ×”×•×¡×¤×ª ×××–×™×Ÿ ×œ××™×¨×•×¢ ×œ×—×™×¦×” ×¢×œ ×›×¤×ª×•×¨ ×—×™×¤×•×©
document.getElementById('search-button').addEventListener('click', searchPosts);


  // ×˜×•×¢×Ÿ ××ª ×”×“×™×¨×•×ª ×‘×”×ª×—×œ×”
  renderPosts(posts);
</script>

  <!--<script type="module" src="script.js" defer></script>-->
  <script src="script.js"></script>
  <div id="favorites-dropdown" class="favorites-dropdown"></div>

  <!-- ××–×•×¨ ×”×§×™×©×•×¨×™× ×”×—×‘×¨×ª×™×™× -->
  <footer class="help-footer">
    <div class="social-icons">
      <a href="https://www.instagram.com" target="_blank"><i class="fab fa-instagram"></i></a>
      <a href="https://www.linkedin.com" target="_blank"><i class="fab fa-linkedin"></i></a>
      <a href="https://www.facebook.com" target="_blank"><i class="fab fa-facebook"></i></a>
      <a href="https://play.google.com" target="_blank"><i class="fab fa-google-play"></i></a>
      <a href="https://www.apple.com/app-store/" target="_blank"><i class="fab fa-apple"></i></a>
    </div>
    <div class="help-text">
      <p>×¢×–×¨×” </p>
    </div>
  </footer>
</body>
</html>
